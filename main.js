!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_inactive",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"},t=(e,t,o)=>{e.querySelector(`#${t.id}-error`).textContent=" ",t.classList.remove(o.inputErrorClass)},o=(e,t)=>{e.disabled=!0,e.classList.add(t.inactiveButtonClass)},n=(e,t,n)=>{(e=>e.some((e=>!e.validity.valid)))(e)?o(t,n):(t.disabled=!1,t.classList.remove(n.inactiveButtonClass))},r=e=>{document.querySelectorAll(e.formSelector).forEach((r=>{((e,r)=>{const a=Array.from(e.querySelectorAll(r.inputSelector)),c=e.querySelector(r.submitButtonSelector);n(a,c,r),e.addEventListener("reset",(()=>{o(c,r)})),a.forEach((o=>{o.addEventListener("input",(function(){((e,o,n)=>{o.validity.valid?t(e,o,n):((e,t,o,n)=>{e.querySelector(`#${t.id}-error`).textContent=o,t.classList.add(n.inputErrorClass)})(e,o,o.validationMessage,n)})(e,o,r),n(a,c,r)}))}))})(r,e)}))};r(e);const a=document.querySelector("#edit-modal"),c=document.querySelector(".profile__edit-btn"),s=document.querySelector(".profile__name"),l=document.querySelector(".profile__description"),i=(a.querySelector(".modal__close-btn"),document.forms["profile-form"]),d=a.querySelector("#profile-name-input"),u=a.querySelector("#profile-description-input"),m=document.querySelector("#add-card-modal"),p=document.querySelector(".profile__add-btn"),_=(m.querySelector(".modal__close-btn"),document.forms["add-card-form"]),f=(_.querySelector(".modal__submit-btn"),document.querySelector("#preview-modal")),y=f.querySelector(".modal__image"),v=f.querySelector(".modal__caption"),S=(f.querySelector(".modal__close-btn_type_preview"),document.querySelectorAll(".modal"));document.querySelectorAll("#modal__close").forEach((e=>{const t=e.closest(".modal");e.addEventListener("click",(()=>L(t)))}));const q=m.querySelector("#card-link-input"),g=m.querySelector("#card-caption-input"),h=document.querySelector("#card-template"),b=document.querySelector(".cards__list");function w(e){if("Escape"===e.key){const e=document.querySelector(".modal_opened");e&&L(e)}}function k(e,t="prepend"){const o=function(e){const t=h.content.querySelector(".card").cloneNode(!0),o=t.querySelector(".card__title"),n=t.querySelector(".card__image"),r=t.querySelector(".card__like-btn"),a=t.querySelector(".card__delete-btn");return o.textContent=e.name,n.src=e.link,n.alt=e.name,r.addEventListener("click",(()=>{r.classList.toggle("card__like-btn_liked")})),a.addEventListener("click",(()=>{t.remove()})),n.addEventListener("click",(()=>{E(f),y.src=e.link,y.alt=e.name,v.textContent=e.name})),t}(e);b[t](o)}function E(e){e.classList.add("modal_opened"),document.addEventListener("keydown",w)}function L(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",w)}c.addEventListener("click",(()=>{var o,n;d.value=s.textContent,u.value=l.textContent,o=i,n=e,[d,u].forEach((e=>{t(o,e,n)})),E(a)})),i.addEventListener("submit",(function(e){e.preventDefault(),s.textContent=d.value,l.textContent=u.value,L(a)})),p.addEventListener("click",(()=>{E(m)})),_.addEventListener("submit",(function(e){e.preventDefault(),k({name:g.value,link:q.value}),L(m),_.reset()})),[{name:"Val Thorens",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/1-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Restaurant terrace",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/2-photo-by-ceiline-from-pexels.jpg"},{name:"An outdoor cafe",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/3-photo-by-tubanur-dogan-from-pexels.jpg"},{name:"A very long bridge, over the forest and through the trees",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/4-photo-by-maurice-laschet-from-pexels.jpg"},{name:"Tunnel with morning light",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/5-photo-by-van-anh-nguyen-from-pexels.jpg"},{name:"Mountain house",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/6-photo-by-moritz-feldmann-from-pexels.jpg"},{name:"Golden Gate Bridge",link:"  https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/spots/7-photo-by-griffin-wooldridge-from-pexels.jpg"}].forEach((e=>{k(e)})),S.forEach((e=>{e.addEventListener("mousedown",(t=>{t.target.classList.contains("modal_opened")&&L(e)}))})),r(e)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MUIsRSIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvc2NyaXB0cy92YWxpZGF0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3N1Ym1pdC1idG5cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc3VibWl0LWJ0bl9pbmFjdGl2ZVwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JcIixcbn07XG5cbmNvbnN0IHNob3dJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTXNnLCBjb25maWcpID0+IHtcbiAgY29uc3QgZXJyb3JNc2dFTGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgKTtcbiAgZXJyb3JNc2dFTGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNc2c7XG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xufTtcblxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yTXNnRUxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICk7XG4gIGVycm9yTXNnRUxlbWVudC50ZXh0Q29udGVudCA9IFwiIFwiO1xuICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbn07XG5cbmNvbnN0IGNoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpID0+IHtcbiAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICBzaG93SW5wdXRFcnJvcihcbiAgICAgIGZvcm1FbGVtZW50LFxuICAgICAgaW5wdXRFbGVtZW50LFxuICAgICAgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlLFxuICAgICAgY29uZmlnXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICBoaWRlSW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICB9XG59O1xuXG5jb25zdCBoYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XG4gIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gIH0pO1xufTtcblxuY29uc3QgZGlzYWJsZUJ1dHRvbiA9IChidXR0b25FbGVtZW50LCBjb25maWcpID0+IHtcbiAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG59O1xuXG5leHBvcnQgY29uc3QgcmVzZXRWYWxpZGF0aW9uID0gKGZvcm1FbGVtZW50LCBpbnB1dExpc3QsIGNvbmZpZykgPT4ge1xuICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcbiAgfSk7XG59O1xuXG5jb25zdCB0b2dnbGVCdXR0b25TdGF0ZSA9IChpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG4gIH0gZWxzZSB7XG4gICAgYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIH1cbn07XG5cbmNvbnN0IHNldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbGVtZW50LCBjb25maWcpID0+IHtcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKVxuICApO1xuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG5cbiAgZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2V0XCIsICgpID0+IHtcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG4gIH0pO1xuXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpO1xuICAgICAgdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50LCBjb25maWcpO1xuICAgIH0pO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3Rvcik7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbCkgPT4ge1xuICAgIHNldEV2ZW50TGlzdGVuZXJzKGZvcm1FbCwgY29uZmlnKTtcbiAgfSk7XG59O1xuXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQge1xuICBlbmFibGVWYWxpZGF0aW9uLFxuICBzZXR0aW5ncyxcbiAgcmVzZXRWYWxpZGF0aW9uLFxufSBmcm9tIFwiLi4vc2NyaXB0cy92YWxpZGF0aW9uLmpzXCI7XG5cbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcbiAge1xuICAgIG5hbWU6IFwiVmFsIFRob3JlbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMS1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlJlc3RhdXJhbnQgdGVycmFjZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8yLXBob3RvLWJ5LWNlaWxpbmUtZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkFuIG91dGRvb3IgY2FmZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8zLXBob3RvLWJ5LXR1YmFudXItZG9nYW4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkEgdmVyeSBsb25nIGJyaWRnZSwgb3ZlciB0aGUgZm9yZXN0IGFuZCB0aHJvdWdoIHRoZSB0cmVlc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy80LXBob3RvLWJ5LW1hdXJpY2UtbGFzY2hldC1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVHVubmVsIHdpdGggbW9ybmluZyBsaWdodFwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy81LXBob3RvLWJ5LXZhbi1hbmgtbmd1eWVuLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJNb3VudGFpbiBob3VzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy82LXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiR29sZGVuIEdhdGUgQnJpZGdlXCIsXG4gICAgbGluazogXCIgIGh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvNy1waG90by1ieS1ncmlmZmluLXdvb2xkcmlkZ2UtZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG5dO1xuXG5jb25zdCBlZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIik7XG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idG5cIik7XG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XG5jb25zdCBwcm9maWxlQ2xvc2VCdXR0b24gPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuY29uc3QgcHJvZmlsZUZvcm1FbGVtZW50ID0gZG9jdW1lbnQuZm9ybXNbXCJwcm9maWxlLWZvcm1cIl07XG5cbmNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBlZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW5hbWUtaW5wdXRcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFxuICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCJcbik7XG5cbmNvbnN0IGNhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XG5jb25zdCBuZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnRuXCIpO1xuY29uc3QgY2xvc2VDYXJkQnV0dG9uID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcbmNvbnN0IGNhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJhZGQtY2FyZC1mb3JtXCJdO1xuY29uc3QgY2FyZFN1Ym1pdEJ0biA9IGNhcmRGb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3N1Ym1pdC1idG5cIik7XG5cbmNvbnN0IHByZXZpZXdNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1tb2RhbFwiKTtcbmNvbnN0IHByZXZpZXdNb2RhbEltZyA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbmNvbnN0IHByZXZpZXdNb2RhbENhcCA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xuY29uc3QgcHJldmlld01vZGFsQ2xvc2VCdG4gPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcbiAgXCIubW9kYWxfX2Nsb3NlLWJ0bl90eXBlX3ByZXZpZXdcIlxuKTtcblxuY29uc3QgcG9wdXBzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKTtcbmNvbnN0IGNsb3NlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIjbW9kYWxfX2Nsb3NlXCIpO1xuXG5jbG9zZUJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG4gIC8vIEZpbmQgdGhlIGNsb3Nlc3QgcG9wdXAgb25seSBvbmNlXG4gIGNvbnN0IHBvcHVwID0gYnV0dG9uLmNsb3Nlc3QoXCIubW9kYWxcIik7XG4gIC8vIFNldCB0aGUgbGlzdGVuZXJcbiAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiBjbG9zZU1vZGFsKHBvcHVwKSk7XG59KTtcblxuY29uc3QgY2FyZEltZ0lucHV0ID0gY2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC1saW5rLWlucHV0XCIpO1xuY29uc3QgY2FyZENhcCA9IGNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtY2FwdGlvbi1pbnB1dFwiKTtcblxuY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXRlbXBsYXRlXCIpO1xuY29uc3QgY2FyZHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcblxuZnVuY3Rpb24gaGFuZGxlRXNjYXBlKGV2dCkge1xuICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgIGNvbnN0IG9wZW5lZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9vcGVuZWRcIik7XG4gICAgaWYgKG9wZW5lZFBvcHVwKSB7XG4gICAgICBjbG9zZU1vZGFsKG9wZW5lZFBvcHVwKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVuZGVyQ2FyZChpdGVtLCBtZXRob2QgPSBcInByZXBlbmRcIikge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGl0ZW0pO1xuICBjYXJkc0xpc3RbbWV0aG9kXShjYXJkRWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50KGRhdGEpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUuY29udGVudFxuICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gIGNvbnN0IGNhcmROYW1lRUwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICBjb25zdCBjYXJkSW1hZ2VFbCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIik7XG4gIGNvbnN0IGNhcmRMaWtlQnRuID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ0blwiKTtcbiAgY29uc3QgY2FyZERlbGV0ZUJ0biA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ0blwiKTtcblxuICBjYXJkTmFtZUVMLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICBjYXJkSW1hZ2VFbC5zcmMgPSBkYXRhLmxpbms7XG4gIGNhcmRJbWFnZUVsLmFsdCA9IGRhdGEubmFtZTtcblxuICBjYXJkTGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRMaWtlQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ0bl9saWtlZFwiKTtcbiAgfSk7XG5cbiAgY2FyZERlbGV0ZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRFbGVtZW50LnJlbW92ZSgpO1xuICB9KTtcblxuICBjYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIG9wZW5Nb2RhbChwcmV2aWV3TW9kYWwpO1xuICAgIHByZXZpZXdNb2RhbEltZy5zcmMgPSBkYXRhLmxpbms7XG4gICAgcHJldmlld01vZGFsSW1nLmFsdCA9IGRhdGEubmFtZTtcbiAgICBwcmV2aWV3TW9kYWxDYXAudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gIH0pO1xuXG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGhhbmRsZUVzY2FwZSk7XG59XG5cbmZ1bmN0aW9uIGNsb3NlTW9kYWwobW9kYWwpIHtcbiAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgaGFuZGxlRXNjYXBlKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IHByb2ZpbGVOYW1lSW5wdXQudmFsdWU7XG4gIHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlO1xuICBjbG9zZU1vZGFsKGVkaXRNb2RhbCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZU5ld0NhcmRTdWJtaXQoZXZ0KSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBjb25zdCBpbnB1dFZhbHVlcyA9IHsgbmFtZTogY2FyZENhcC52YWx1ZSwgbGluazogY2FyZEltZ0lucHV0LnZhbHVlIH07XG4gIHJlbmRlckNhcmQoaW5wdXRWYWx1ZXMpO1xuICBjbG9zZU1vZGFsKGNhcmRNb2RhbCk7XG4gIGNhcmRGb3JtLnJlc2V0KCk7XG59XG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHByb2ZpbGVOYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlTmFtZS50ZXh0Q29udGVudDtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBwcm9maWxlRGVzY3JpcHRpb24udGV4dENvbnRlbnQ7XG4gIHJlc2V0VmFsaWRhdGlvbihcbiAgICBwcm9maWxlRm9ybUVsZW1lbnQsXG4gICAgW3Byb2ZpbGVOYW1lSW5wdXQsIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0XSxcbiAgICBzZXR0aW5nc1xuICApO1xuICBvcGVuTW9kYWwoZWRpdE1vZGFsKTtcbn0pO1xuXG5wcm9maWxlRm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XG5cbm5ld0NhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgb3Blbk1vZGFsKGNhcmRNb2RhbCk7XG59KTtcblxuY2FyZEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVOZXdDYXJkU3VibWl0KTtcblxuaW5pdGlhbENhcmRzLmZvckVhY2goKGNhcmQpID0+IHtcbiAgcmVuZGVyQ2FyZChjYXJkKTtcbn0pO1xuXG5wb3B1cHMuZm9yRWFjaCgocG9wdXApID0+IHtcbiAgcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpKSB7XG4gICAgICBjbG9zZU1vZGFsKHBvcHVwKTtcbiAgICB9XG4gIH0pO1xufSk7XG5cbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpO1xuIl0sIm5hbWVzIjpbInNldHRpbmdzIiwiZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJoaWRlSW5wdXRFcnJvciIsImZvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiY29uZmlnIiwicXVlcnlTZWxlY3RvciIsImlkIiwidGV4dENvbnRlbnQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJkaXNhYmxlQnV0dG9uIiwiYnV0dG9uRWxlbWVudCIsImRpc2FibGVkIiwiYWRkIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dExpc3QiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsImhhc0ludmFsaWRJbnB1dCIsImVuYWJsZVZhbGlkYXRpb24iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZm9ybUVsIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJBcnJheSIsImZyb20iLCJhZGRFdmVudExpc3RlbmVyIiwiY2hlY2tJbnB1dFZhbGlkaXR5Iiwic2hvd0lucHV0RXJyb3IiLCJlcnJvck1zZyIsInZhbGlkYXRpb25NZXNzYWdlIiwiZWRpdE1vZGFsIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVGb3JtRWxlbWVudCIsImZvcm1zIiwicHJvZmlsZU5hbWVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwiY2FyZE1vZGFsIiwibmV3Q2FyZEJ1dHRvbiIsImNhcmRGb3JtIiwicHJldmlld01vZGFsIiwicHJldmlld01vZGFsSW1nIiwicHJldmlld01vZGFsQ2FwIiwicG9wdXBzIiwiYnV0dG9uIiwicG9wdXAiLCJjbG9zZXN0IiwiY2xvc2VNb2RhbCIsImNhcmRJbWdJbnB1dCIsImNhcmRDYXAiLCJjYXJkVGVtcGxhdGUiLCJjYXJkc0xpc3QiLCJoYW5kbGVFc2NhcGUiLCJldnQiLCJrZXkiLCJvcGVuZWRQb3B1cCIsInJlbmRlckNhcmQiLCJpdGVtIiwibWV0aG9kIiwiY2FyZEVsZW1lbnQiLCJkYXRhIiwiY29udGVudCIsImNsb25lTm9kZSIsImNhcmROYW1lRUwiLCJjYXJkSW1hZ2VFbCIsImNhcmRMaWtlQnRuIiwiY2FyZERlbGV0ZUJ0biIsIm5hbWUiLCJzcmMiLCJsaW5rIiwiYWx0IiwidG9nZ2xlIiwib3Blbk1vZGFsIiwiZ2V0Q2FyZEVsZW1lbnQiLCJtb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZXNldFZhbGlkYXRpb24iLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwicmVzZXQiLCJjYXJkIiwidGFyZ2V0IiwiY29udGFpbnMiXSwic291cmNlUm9vdCI6IiJ9